<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="~{fragments :: head-content(title='Admin Dashboard')}">
    <title>Admin Dashboard</title>
</head>
<body>
<header>
    <h3>Admin Dashboard</h3>
    <nav>
        <a href="/" target="_blank">View Site</a>
        <a href="/logout">Logout</a>
    </nav>
</header>

<main>
    <div style="margin-bottom: 20px;">
        <a href="/admin/create"
           style="background: #eee; padding: 8px 12px; border-radius: 4px; text-decoration: none; font-weight: bold; color: #333; border: 1px solid #ccc; display: inline-block;">
            + New Post
        </a>
    </div>

    <div class="table-container">
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px; min-width: 600px;">
            <thead>
            <tr style="text-align: left; border-bottom: 2px solid #ddd;">
                <th style="padding-bottom: 10px;">Title & Status</th>
                <th style="padding-bottom: 10px;">Date Created</th>
                <th style="padding-bottom: 10px;">Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="post : ${posts}" style="border-bottom: 1px solid #eee;">
                <td style="padding: 12px 0;">
                    <span th:text="${post.title}" style="font-weight: 500;">Title</span>

                    <span th:if="${!post.published}"
                          style="background: #fff3cd; color: #856404; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; margin-left: 8px; font-weight: bold; border: 1px solid #ffeeba;">
                                DRAFT
                            </span>

                    <span th:if="${post.published}"
                          style="background: #d1e7dd; color: #0f5132; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; margin-left: 8px; border: 1px solid #badbcc;">
                                LIVE
                            </span>
                </td>

                <td th:text="${#temporals.format(post.createdAt, 'dd MMM yyyy')}" style="padding: 12px 0; color: #666;">
                    Date
                </td>

                <td style="padding: 12px 0;">
                    <a th:href="@{/admin/edit/{id}(id=${post.id})}" style="margin-right: 10px;">Edit</a>

                    <form th:action="@{/admin/delete/{id}(id=${post.id})}" method="post" style="display:inline;">
                        <button type="submit"
                                onclick="return confirm('Are you sure you want to delete this post? This cannot be undone.')"
                                style="background:none; border:none; color: #dc3545; cursor:pointer; padding:0; font:inherit; text-decoration: underline;">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <p th:if="${posts.empty}" style="text-align: center; color: #888; margin-top: 2rem;">
        No posts found. Create your first one!
    </p>
</main>
</body>
</html>
